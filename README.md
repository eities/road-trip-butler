# Road Trip Butler üöóüé©

**Road Trip Butler** is an AI-powered travel concierge built with **Flutter** and **Serverpod**. It transforms the hassel of planning road trips by providing a curated itinerary; intelligently finding stops that match your specific travel personality and unique needs.

Unlike standard GPS navigation that just gets you from A to B, Road Trip Butler analyzes your route, calculates logical break times (like lunch or stretching legs), and uses Generative AI to find and curate specific stops along the way.

## ‚ú® Features

*   **AI-Curated Itineraries**: Select a persona ("The Explorer", "The Efficient", "The Family Aide") and let the AI find stops that match your vibe.
*   **Smart Route Slicing**: The backend calculates exactly where you will be on the road at specific times (e.g., "Where will I be at 1:00 PM for lunch?").
*   **Generative AI Integration**: Uses **Google Gemini** to:
    *   Analyze the route and define "Search Windows".
    *   Filter raw Google Places results.
    *   Write persuasive, personalized descriptions for each stop.
*   **Google Maps Integration**:
    *   Visualizes the route polyline and stops.
    *   Calculates detour times.
    *   **Export to Maps**: One-click export of your selected stops directly to the Google Maps app for navigation.
    *   Trips are saved to local storage, so no user accounts are necessary for now
*   **Full-Stack Dart**: Built using Serverpod, allowing for shared code and types between the Flutter client and the backend.

## üèó Architecture

The project is structured as a standard Serverpod monorepo:

*   **`road_trip_butler_flutter`**: The frontend mobile application.
    *   Collects user input (Start, End, Date, Persona).
    *   Displays the interactive map and curated stop cards.
    *   Handles local storage of saved trips.
*   **`road_trip_butler_server`**: The backend logic.
    *   **`MapService`**: Connects to Google Routes API to fetch polylines and calculate drive times. Connects to Google Places API to search for venues along the route.
    *   **`AiService`**: Connects to Google Gemini to generate search prompts and curate the final list of stops.
*   **`road_trip_butler_client`**: The generated bridge code that allows the Flutter app to talk to the Serverpod server.

## üöÄ Getting Started

### Prerequisites

*   Flutter SDK
*   Docker Desktop (required for the Serverpod database)
*   Serverpod CLI

### API Keys Required

You need to configure the following keys in your server setup:
1.  **Google Maps API Key**: Must have **Routes API** and **Places API (New)** enabled.
2.  **Google Gemini API Key**: For the generative AI features.

### Installation & Setup

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/yourusername/road_trip_butler.git
    cd road_trip_butler
    ```

2.  **Setup the Server**:
    Navigate to the server directory:
    ```bash
    cd road_trip_butler_server
    ```

    Create a `config/passwords.yaml` file (if it doesn't exist) and add your API keys:
    ```yaml
    # config/passwords.yaml
    development:
      database: 'postgres' # Default serverpod password
      googleMapsApiKey: 'YOUR_GOOGLE_MAPS_KEY'
      geminiApiKey: 'YOUR_GEMINI_KEY'
    ```

    Start the database containers:
    ```bash
    docker-compose up --build --detach
    ```

    Run the server:
    ```bash
    dart bin/main.dart
    ```

3.  **Run the App**:
    Open a new terminal and navigate to the Flutter app directory:
    ```bash
    cd road_trip_butler_flutter
    flutter pub get
    flutter run
    ```

## üß† How It Works (Under the Hood)

1.  **Route Analysis**: The server fetches the route polyline and segment durations from Google Routes.
2.  **Time Slicing (Gemini)**: The AI looks at the total duration and departure time to create "Time Slices" (e.g., "Search for coffee 2 hours into the trip").
3.  **Geospatial Search**: The server identifies the lat/lng coordinates along the polyline that correspond to those time slices.
4.  **Places Search**: It performs a "Search Along Route" using Google Places API for the specific queries generated by the AI.
5.  **Curation (Gemini)**: The raw list of places is sent back to Gemini, which selects the best 3 matches for the user's persona and rewrites the descriptions.
6.  **Delivery**: The curated `Trip` object is sent to the Flutter client for display.

## üõ† Tech Stack

*   **Language**: Dart üéØ
*   **Framework**: Flutter üíô
*   **Backend**: Serverpod üöÄ
*   **Database**: PostgreSQL
*   **AI**: Google Gemini Flash 2.5 ‚ú®
*   **Maps**: Google Maps Platform üó∫Ô∏è

## Limitations

*   **Road Trip Butler** is currently optimized for single day road trips, multi-day trips are not supported.
*   This app was tested and developed only on the Android platform. Only minor changes would be necessary for ios or web.
